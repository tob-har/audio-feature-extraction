#N canvas 19 23 1488 980 10;
#X declare -lib timbreID/timbreIDLib;
#X obj 748 14 declare -lib timbreID/timbreIDLib;
#X obj 688 14 loadbang;
#X msg 688 77 \; pd dsp \$1 \;;
#X msg 688 35 1;
#X obj 688 56 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 239 306 bng 15 250 50 0 empty empty empty 17 7 0 10 -4034 -1
-1;
#X obj 119 289 spigot 0;
#X obj 239 262 tgl 15 0 empty empty empty 17 7 0 10 -204786 -1 -1 0
1;
#N canvas 713 346 570 417 onsets 0;
#X obj 56 53 inlet~;
#X obj 176 347 outlet;
#X obj 3 4 cnv 10 400 10 empty empty empty 20 12 0 14 -233017 -66577
0;
#X obj 3 4 cnv 10 10 400 empty empty empty 20 12 0 14 -233017 -66577
0;
#X obj 208 193 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 259 96 loadbang;
#X obj 56 335 outlet~;
#X obj 176 155 bark~ 4096 1024 0.5;
#X msg 259 119 minvel 50 \, debounce 200 \, thresh -1 20;
#X connect 0 0 6 0;
#X connect 0 0 7 0;
#X connect 5 0 8 0;
#X connect 7 0 4 0;
#X connect 7 0 1 0;
#X connect 8 0 7 0;
#X restore 68 265 pd onsets;
#X text 262 308 Manual Trigger FE;
#X text 261 261 Onset Triggered FE On/Off;
#X obj 270 395 bng 15 250 50 0 empty empty empty 17 7 0 10 -228856
-1 -1;
#X obj 264 848 s \$0-feature-list-training;
#X obj 191 931 s \$0-feature-list-analyze;
#X obj 264 826 spigot 0;
#X obj 191 909 spigot 0;
#X obj 309 802 tgl 15 0 empty empty empty 17 7 0 10 -204786 -1 -1 0
1;
#X text 329 800 Send list for training;
#X obj 236 883 tgl 15 0 empty empty empty 17 7 0 10 -204786 -1 -1 0
1;
#X text 258 882 Send list for analysis;
#N canvas 449 53 856 810 audio-input 0;
#X obj 29 199 adc~ 1 2;
#X obj 269 189 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 269 210 openpanel;
#X msg 269 231 set open \$1;
#X msg 269 332 open /Users/t.hartmann/Music/Samples/drum breaks/TS-ClassicBreaksVol2/cameo-rigormortis-111.5bpm.wav
;
#X msg 380 288 1;
#X msg 410 288 0;
#X obj 340 264 t b b;
#X obj 29 550 outlet~;
#X obj 89 550 outlet~;
#X obj 269 359 readsf~ 2;
#X obj 269 416 expr~ $v1 * $v3 \; $v2 * $v3;
#X obj 362 392 vline~;
#X obj 365 369 hsl 60 15 0 1 0 0 empty empty Volume_0-1 -2 -8 0 10
-228856 -1 -1 0 1;
#X obj 29 416 expr~ $v1 * $v3 \; $v2 * $v3;
#X obj 122 392 vline~;
#X obj 125 369 hsl 60 15 0 1 0 0 empty empty Volume_0-1 -2 -8 0 10
-228856 -1 -1 5900 1;
#X text 31 167 Audio Input;
#X text 269 161 Soundfile Playback;
#X obj 518 535 expr~ $v1 * $v3 \; $v2 * $v3;
#X obj 611 511 vline~;
#X obj 614 488 hsl 60 15 0 1 0 0 empty empty Volume_0-1 -2 -8 0 10
-228856 -1 -1 0 1;
#X obj 46 771 dac~ 1 2;
#X obj 46 726 catch~ \$0-main-out-l;
#X obj 91 749 catch~ \$0-main-out-r;
#X obj 518 592 throw~ \$0-main-out-l;
#X obj 611 570 throw~ \$0-main-out-r;
#X text 44 700 MAIN AUDIO OUTPUT;
#X text 601 443 To audio Output;
#X obj 122 44 inlet;
#X obj 163 44 inlet;
#X obj 203 44 inlet;
#X obj 373 44 inlet;
#X obj 253 44 inlet;
#X obj 253 65 route 0 1;
#X obj 179 569 env~;
#X obj 179 590 - 100;
#X obj 179 611 s \$0-input-volume-meter-l;
#X obj 229 549 env~;
#X obj 229 570 - 100;
#X obj 229 590 s \$0-input-volume-meter-r;
#X text 276 567 To VU Meters;
#X connect 0 0 14 0;
#X connect 0 1 14 1;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 10 0;
#X connect 5 0 10 0;
#X connect 6 0 10 0;
#X connect 7 0 5 0;
#X connect 7 1 4 0;
#X connect 10 0 11 0;
#X connect 10 1 11 1;
#X connect 10 2 7 0;
#X connect 11 0 8 0;
#X connect 11 0 19 0;
#X connect 11 0 35 0;
#X connect 11 1 9 0;
#X connect 11 1 19 1;
#X connect 11 1 38 0;
#X connect 12 0 11 2;
#X connect 13 0 12 0;
#X connect 14 0 8 0;
#X connect 14 0 19 0;
#X connect 14 0 35 0;
#X connect 14 1 9 0;
#X connect 14 1 19 1;
#X connect 14 1 38 0;
#X connect 15 0 14 2;
#X connect 16 0 15 0;
#X connect 19 0 25 0;
#X connect 19 1 26 0;
#X connect 20 0 19 2;
#X connect 21 0 20 0;
#X connect 23 0 22 0;
#X connect 24 0 22 1;
#X connect 29 0 16 0;
#X connect 30 0 13 0;
#X connect 31 0 1 0;
#X connect 32 0 21 0;
#X connect 33 0 34 0;
#X connect 34 0 6 0;
#X connect 34 1 7 0;
#X connect 35 0 36 0;
#X connect 36 0 37 0;
#X connect 38 0 39 0;
#X connect 39 0 40 0;
#X restore 66 157 pd audio-input;
#X obj 66 74 vsl 15 60 0 1 0 0 empty empty empty 0 -9 0 10 -228856
-1 -1 5900 1;
#X obj 86 74 vsl 15 60 0 1 0 0 empty empty empty 0 -9 0 10 -228856
-1 -1 0 1;
#X obj 106 73 vsl 15 60 0 1 0 0 empty empty empty 0 -9 0 10 -261234
-1 -1 0 1;
#X obj 136 72 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 137 93 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 157 69 Load Soundfile;
#X text 155 94 Play Loop / stop;
#X text 62 20 Audio In;
#X text 77 34 Audio Player;
#X text 94 49 Audio OUT;
#X obj 277 73 vu 15 80 \$0-input-volume-meter-l empty -1 -8 0 10 -66577
-1 0 0;
#X obj 307 73 vu 15 80 \$0-input-volume-meter-r empty -1 -8 0 10 -66577
-1 0 0;
#X text 274 51 Audio IN;
#N canvas 204 288 725 528 to_lern_about 0;
#N canvas 713 346 570 417 onsets 0;
#X obj 56 53 inlet~;
#X obj 176 347 outlet;
#X obj 3 4 cnv 10 400 10 empty empty empty 20 12 0 14 -233017 -66577
0;
#X obj 3 4 cnv 10 10 400 empty empty empty 20 12 0 14 -233017 -66577
0;
#X obj 208 193 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 259 96 loadbang;
#X obj 56 335 outlet~;
#X obj 176 155 bark~ 4096 1024 0.5;
#X msg 259 119 minvel 50 \, debounce 200 \, thresh -1 20;
#X connect 0 0 6 0;
#X connect 0 0 7 0;
#X connect 5 0 8 0;
#X connect 7 0 4 0;
#X connect 7 0 1 0;
#X connect 8 0 7 0;
#X restore 66 309 pd onsets;
#X obj 66 342 attackTime~ 4096;
#X text 139 307 Audio Onset Detection (amplitude peak);
#X obj 118 80 zeroCrossing~ 2048;
#X text 241 82 Ermittelt Noisiness;
#X obj 118 105 specBrightness~ 1024 1200;
#X text 279 104 Ermittelt Noisiness;
#X text 329 115 Creation arguments are window size in samples \, and
a boundary frequency to determine the ratio of high spectral content.
, f 47;
#X obj 119 128 barkSpecBrightness~ 2048;
#X obj 121 208 cepstrum~ 2048;
#X obj 121 230 bfcc~ 2048 0.25;
#X obj 120 185 attackTime~ 4096;
#X text 127 36 To learn about:;
#X obj 118 439 r \$0-feature-list-training;
#X obj 138 460 r \$0-feature-list-analyze;
#X connect 0 0 1 0;
#X connect 0 1 1 0;
#X restore 688 117 pd to_lern_about;
#N canvas 0 50 450 300 (subpatch) 0;
#X array \$0-sampleBuffer-graph 1024 float 0;
#X coords 0 1 1023 -1 200 140 1 0 0;
#X restore 493 160 graph;
#X obj 270 416 spigot 0;
#X obj 315 392 tgl 15 0 empty empty empty 17 7 0 10 -228856 -1 -1 0
1;
#X obj 270 437 s \$0-trig-show-buffer;
#X obj 172 200 s~ \$0-to-show-buffer;
#X text 335 390 SHOW BUFFER;
#N canvas 667 643 570 349 single_feature 1;
#X obj 23 37 inlet~;
#X obj 113 37 inlet;
#X obj 23 297 outlet;
#X obj 23 125 bfcc~ 1024;
#X text 19 13 Audio IN;
#X text 109 12 Trigger IN;
#X text 72 300 Feature List/Value OUT;
#X obj 181 205 list split 5;
#X obj 181 226 list split 1;
#X text 265 202 Spit out only 5 first items of list;
#X text 263 225 Truncate first item of list;
#X msg 215 250 list out;
#X msg 181 174 list in;
#X text 183 144 Use this to truncate the list;
#X connect 0 0 3 0;
#X connect 1 0 3 0;
#X connect 3 0 2 0;
#X connect 7 0 8 0;
#X connect 8 1 11 0;
#X connect 12 0 7 0;
#X restore 69 633 pd single_feature;
#X obj 119 334 t b b;
#N canvas 849 196 757 467 multi_features_list 0;
#X obj 19 45 inlet~;
#X text 18 19 Audio IN;
#X obj 19 367 list append;
#X obj 82 329 list append;
#X obj 159 45 inlet;
#X obj 159 69 t b b b b b b;
#X obj 19 405 outlet;
#X obj 250 173 specBrightness~ 1024 1200;
#X obj 137 172 bfcc~ 2048 0.25;
#X obj 20 171 attackTime~ 4096;
#X obj 419 274 list split 5;
#X obj 419 295 list split 1;
#X text 503 271 Spit out only 5 first items of list;
#X text 501 294 Truncate first item of list;
#X msg 453 319 list out;
#X msg 419 243 list in;
#X text 421 213 Use this to truncate the list;
#X connect 0 0 7 0;
#X connect 0 0 8 0;
#X connect 0 0 9 0;
#X connect 2 0 6 0;
#X connect 3 0 2 1;
#X connect 4 0 5 0;
#X connect 5 0 9 0;
#X connect 5 1 8 0;
#X connect 5 2 7 0;
#X connect 7 0 3 1;
#X connect 8 0 3 0;
#X connect 9 0 2 0;
#X connect 10 0 11 0;
#X connect 11 1 14 0;
#X connect 15 0 10 0;
#X restore 264 633 pd multi_features_list;
#X obj 168 608 spigot 0;
#X obj 213 587 tgl 15 0 empty empty empty 17 7 0 10 -4034 -1 -1 0 1
;
#X obj 388 608 spigot 0;
#X obj 433 587 tgl 15 0 empty empty empty 17 7 0 10 -4034 -1 -1 1 1
;
#N canvas 145 274 569 494 feature-list-builder 0;
#X obj 197 144 list prepend;
#X obj 230 170 t l;
#X obj 197 304 spigot 0;
#X obj 197 325 t l b;
#X obj 224 346 s \$0-reset-to-init;
#X obj 266 117 r \$0-reset-to-init;
#X msg 264 277 1, f 1;
#X obj 284 249 r \$0-reset-to-init;
#X msg 284 277 0, f 1;
#X obj 64 158 f;
#X obj 64 216 mod;
#X obj 103 158 + 1;
#X obj 108 196 r \$0-how-many;
#X obj 64 250 select;
#X obj 97 227 - 1;
#X msg 79 128 0, f 2;
#X obj 37 80 t l b;
#X obj 37 43 inlet;
#X obj 39 433 outlet;
#X obj 242 64 bang;
#X obj 242 43 r \$0-list-builder-manual-reset;
#X obj 117 46 inlet;
#X obj 165 46 inlet;
#X connect 0 0 1 0;
#X connect 0 0 2 0;
#X connect 1 0 0 1;
#X connect 2 0 3 0;
#X connect 3 0 18 0;
#X connect 3 1 4 0;
#X connect 5 0 0 1;
#X connect 6 0 2 1;
#X connect 7 0 8 0;
#X connect 8 0 2 1;
#X connect 9 0 10 0;
#X connect 9 0 11 0;
#X connect 10 0 13 0;
#X connect 11 0 9 1;
#X connect 12 0 10 1;
#X connect 12 0 14 0;
#X connect 12 0 15 0;
#X connect 13 0 15 0;
#X connect 13 0 6 0;
#X connect 14 0 13 1;
#X connect 15 0 9 1;
#X connect 16 0 0 0;
#X connect 16 1 9 0;
#X connect 17 0 16 0;
#X connect 19 0 0 1;
#X connect 19 0 15 0;
#X connect 20 0 19 0;
#X connect 21 0 14 0;
#X connect 21 0 10 1;
#X connect 21 0 15 0;
#X connect 22 0 19 0;
#X restore 264 744 pd feature-list-builder;
#X floatatom 331 721 5 1 20 0 How_many - -;
#X obj 399 722 bng 15 250 50 0 empty empty Manual_Reset 17 7 0 10 -191407
-1 -1;
#X text 424 738 Outputs a consecutive list of the features \, collected
after the given number of anaysis;
#X obj 974 728 timbreID;
#X obj 974 670 r \$0-feature-list-training;
#X obj 996 696 r \$0-feature-list-analyze;
#X floatatom 974 793 10 0 0 0 timbreID - -;
#X msg 1045 416 uncluster;
#X text 1114 415 Go back to reporting raw instance indexes.;
#X msg 1077 460 clear;
#X text 1117 459 Wipe all instances to start over.;
#X msg 1030 396 cluster 12;
#X text 1029 351 Perform hierarchical clustering to find a given number
of clusters (e.g. \, instruments). See arcane_parameters subpatch above
for manual clustering.;
#X msg 973 294 write ./data/feature-db.timid;
#X msg 1009 319 read ./data/feature-db.timid;
#X msg 1110 396 cluster 4;
#X obj 316 350 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 316 371 metro 100;
#N canvas 0 23 292 260 show-buffer 0;
#N canvas 205 170 462 302 do-plotting 0;
#X obj 79 37 inlet;
#X obj 79 203 list prepend 0;
#X obj 203 116 list length;
#X obj 203 138 change;
#X obj 203 160 pack f \$0;
#X obj 79 59 t l l;
#X obj 79 224 s \$0-sampleBuffer-graph;
#X msg 203 181 \; \$2-sampleBuffer-graph resize \$1 \;;
#X connect 0 0 5 0;
#X connect 1 0 6 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 7 0;
#X connect 5 0 1 0;
#X connect 5 1 2 0;
#X restore 23 181 pd do-plotting;
#X obj 23 157 sampleBuffer~ 1024;
#X obj 72 86 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 59 122 window 2048;
#X obj 72 62 r \$0-trig-show-buffer;
#X text 142 84 SHOW BUFFER;
#X obj 22 22 r~ \$0-to-show-buffer;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X connect 3 0 1 0;
#X connect 4 0 2 0;
#X connect 6 0 1 0;
#X restore 493 306 pd show-buffer;
#X obj 981 496 s \$0-feature-list-training;
#X obj 101 899 spigot 0;
#X obj 146 873 tgl 15 0 empty empty empty 17 7 0 10 -204786 -1 -1 0
1;
#X obj 101 930 print;
#X connect 1 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 2 0;
#X connect 5 0 42 0;
#X connect 6 0 42 0;
#X connect 7 0 6 1;
#X connect 8 0 41 0;
#X connect 8 0 43 0;
#X connect 8 1 6 0;
#X connect 11 0 36 0;
#X connect 14 0 12 0;
#X connect 15 0 13 0;
#X connect 16 0 14 1;
#X connect 18 0 15 1;
#X connect 20 0 8 0;
#X connect 20 0 39 0;
#X connect 20 1 39 0;
#X connect 21 0 20 0;
#X connect 22 0 20 1;
#X connect 23 0 20 4;
#X connect 24 0 20 2;
#X connect 25 0 20 3;
#X connect 36 0 38 0;
#X connect 37 0 36 1;
#X connect 41 0 48 0;
#X connect 42 0 44 0;
#X connect 42 0 46 0;
#X connect 42 1 11 0;
#X connect 43 0 48 0;
#X connect 44 0 41 1;
#X connect 45 0 44 1;
#X connect 46 0 43 1;
#X connect 47 0 46 1;
#X connect 48 0 14 0;
#X connect 48 0 15 0;
#X connect 48 0 69 0;
#X connect 49 0 48 1;
#X connect 50 0 48 2;
#X connect 52 0 55 0;
#X connect 53 0 52 0;
#X connect 54 0 52 1;
#X connect 56 0 68 0;
#X connect 58 0 68 0;
#X connect 60 0 68 0;
#X connect 62 0 68 0;
#X connect 63 0 68 0;
#X connect 64 0 68 0;
#X connect 65 0 66 0;
#X connect 66 0 11 0;
#X connect 69 0 71 0;
#X connect 70 0 69 1;
